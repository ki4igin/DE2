library IEEE;
use IEEE.std_logic_1164.all;
use IEEE.numeric_std.all;

entity counter_top is
    port (
        CLOCK_50 : in std_logic;

        KEY : in std_logic_vector(3 downto 0);

        HEX0 : out std_logic_vector(6 downto 0);
        HEX1 : out std_logic_vector(6 downto 0);
        HEX2 : out std_logic_vector(6 downto 0);
        HEX3 : out std_logic_vector(6 downto 0);
        HEX4 : out std_logic_vector(6 downto 0);
        HEX5 : out std_logic_vector(6 downto 0);
        HEX6 : out std_logic_vector(6 downto 0);
        HEX7 : out std_logic_vector(6 downto 0);
    );
end entity counter_top;

architecture rtl of counter_top is

    component SEG7_LUT_8 is
        port (
            dig  : in unsigned(31 downto 0);
            seg0 : out std_logic_vector(6 downto 0);
            seg1 : out std_logic_vector(6 downto 0);
            seg2 : out std_logic_vector(6 downto 0);
            seg3 : out std_logic_vector(6 downto 0);
            seg4 : out std_logic_vector(6 downto 0);
            seg5 : out std_logic_vector(6 downto 0);
            seg6 : out std_logic_vector(6 downto 0);
            seg7 : out std_logic_vector(6 downto 0);
        );
    end component;

    signal cnt : unsigned(31 downto 0) := (others => '0');
    alias rst  : std_logic is KEY(0);

begin

    seg7_lut : SEG7_LUT_8
    port map(
        dig  => cnt,
        seg0 => HEX0,
        seg1 => HEX1,
        seg2 => HEX2,
        seg3 => HEX3,
        seg4 => HEX4,
        seg5 => HEX5,
        seg6 => HEX6,
        seg7 => HEX7
    );

    counter : process (clk, rst)
    begin
        if rst = '0' then
            cnt <= (others => '0');
        elsif rising_edge(clk) then
            cnt <= cnt + 1;
        end if;
    end process counter;
end architecture rtl;
